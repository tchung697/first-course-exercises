\NeedsTeXFormat{LaTeX2e}
\ProvidesPackage{settings}

% Page layout settings
\usepackage[margin=4cm]{geometry}
\setlength{\parskip}{0ex plus0.5ex minus0.2ex}
\usepackage{lastpage}
\usepackage{fancyhdr}
\pagestyle{fancy}
\fancyhf{}
\renewcommand{\headrulewidth}{0pt}
\cfoot{\footnotesize Page \thepage\ of \pageref{LastPage}}
\fancypagestyle{plain}{%
  \fancyhf{}
  \renewcommand{\headrulewidth}{0pt}
  \cfoot{\footnotesize Page \thepage\ of \pageref{LastPage}}
}

% CJK packages and settings
\usepackage{xeCJK}
\usepackage{fontspec}
\XeTeXlinebreaklocale "zh"
\setCJKmainfont{Songti TC}
\setCJKsansfont{Taipei Sans TC Beta}
\newCJKfontfamily\kai{Kaiti TC}

\usepackage{booktabs}

\makeatletter
\def\@maketitle{%
  \noindent
  \parbox[t]{0.7\textwidth}{%
    \sffamily\bfseries\large\@title%
  }%
  \hfill
  \parbox[t]{0.3\textwidth}{%
    \raggedleft%
    \@date\\
    \@author%
  }%
  \par\vskip1.5em%
}
\makeatother

% Math packages
\usepackage{amsmath, amssymb, amsthm, accents, unicode-math}
\DeclareMathAlphabet{\mathcal}{OMS}{cmsy}{m}{n}
\let\mathbb\relax % Remove the definition by unicode-math
\DeclareMathAlphabet{\mathbb}{U}{msb}{m}{n}
\allowdisplaybreaks
% Theorem environment setup
\newtheoremstyle{sfstyle}% Name
{.5em}% Space above
{.5em}% Space below
{}% Body font
{}% Indent amount
{\bfseries\sffamily}% Theorem head font
{.}% Punctuation after theorem head
{.5em}% Space after theorem head
{}% Theorem head spec
\theoremstyle{sfstyle}
\newtheorem{example}{Example}
\newtheorem{remark}{Remark}
\theoremstyle{remark}
\newtheorem*{solution}{\sffamily Solution}
\renewcommand{\proofname}{\sffamily Proof}

% Section settings
\usepackage{titlesec}
% Section title formatting
\titleformat{\section}[hang]{\large\bfseries\sffamily}{\thesection}{1em}{}
\titleformat{\subsection}[hang]{\bfseries\sffamily}{\thesubsection}{1em}{}
\titleformat{\subsubsection}[hang]{\itshape\sffamily}{\thesubsubsection}{1em}{}
\titleformat{\paragraph}[runin]{\itshape\sffamily \color{greenblue}}{}{1em}{}
\usepackage{tocloft}
\renewcommand{\cfttoctitlefont}{\large}
\renewcommand{\contentsname}{\bfseries\sffamily Contents}
\renewcommand{\cftsecfont}{\sffamily}
\renewcommand{\cftsecpagefont}{\sffamily}
\renewcommand{\cftsubsecfont}{\sffamily}
\renewcommand{\cftsubsecpagefont}{\sffamily}

% Math operator definitions
\DeclareMathOperator{\diag}{diag}
\DeclareMathOperator{\tr}{tr}
\DeclareMathOperator{\rank}{rank}
\DeclareMathOperator{\sign}{sign}
\DeclareMathOperator*{\argmin}{argmin}
\DeclareMathOperator*{\argmax}{argmax}
\DeclareMathOperator{\supp}{supp}
\DeclareMathOperator{\Image}{Im}
\DeclareMathOperator{\Kernel}{Ker}
\DeclareMathOperator{\spn}{span}
\DeclareMathOperator{\nullity}{nullity}
\DeclareMathOperator{\E}{E}
\DeclareMathOperator{\Var}{Var}
\DeclareMathOperator{\Cov}{Cov}
\DeclareMathOperator{\ind}{\perp\!\!\!\perp}
\DeclareMathOperator{\iid}{\overset{\text{iid}}{\sim}}
\DeclareMathOperator{\cp}{\overset{\mathit{cp}}{\longrightarrow}}
\DeclareMathOperator{\as}{\overset{\mathit{a.s.}}{\longrightarrow}}
\DeclareMathOperator{\cd}{\overset{\mathit{d}}{\longrightarrow}}
\DeclareMathOperator*{\plim}{plim}
\DeclareMathOperator{\Normal}{\mathcal{N}}

\newcommand{\bc}[1]{{\left\lbrace #1 \right\rbrace}}
\newcommand{\bp}[1]{{\left( #1 \right)}}
\newcommand{\bs}[1]{{\left[ #1 \right]}}
\newcommand{\abs}[1]{{\left| #1 \right|}}
\newcommand{\norm}[1]{{\left\| #1 \right\|}}
\newcommand{\innerproduct}[2]{{\left\langle #1, #2 \right\rangle}}

\newcommand{\pre}{\mathrm{pre}}
\newcommand{\pa}{\mathrm{pa}}

\usepackage{caption}
\usepackage{subcaption}
\captionsetup{font=small}

\usepackage{enumitem}
\setlist{noitemsep}

% Color palette
\usepackage{xcolor}
\definecolor{greenblue}{RGB}{35, 100, 170}
\definecolor{asparagus}{RGB}{107, 170, 117}
\definecolor{darkred}{RGB}{170, 38, 35}
\definecolor{gray75}{gray}{0.75}

\usepackage{hyperref}
\hypersetup{
  colorlinks=true,
  linkcolor=greenblue,
  urlcolor=greenblue,
  citecolor=asparagus
}

\usepackage{comment}

\usepackage[capitalise]{cleveref}
\crefname{assumption}{Assumption}{Assumptions}
\crefname{theorem}{Theorem}{Theorems}
\crefname{definition}{Definition}{Definitions}
\crefname{figure}{Figure}{Figures}
\crefname{section}{Section}{Sections}
\crefname{table}{Table}{Tables}
\crefname{equation}{Equation}{Equations}
\crefname{example}{Example}{Examples}
\crefname{remark}{Remark}{Remarks}

\usepackage[nogroupskip,style=super,acronym]{glossaries}
\makeglossaries
\newacronym{cdf}{CDF}{cumulative distribution function}
\newacronym{ehw}{EHW}{Eicker-Huber-White}
\newacronym{fwl}{FWL}{Frisch-Waugh-Lovell}
\newacronym{hc}{HC}{heteroskedasticity-consistent}
\newacronym{ols}{OLS}{ordinary least squares}
\newacronym{pdf}{PDF}{probability density function}

\glsdisablehyper

